<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Makbuz Yazdır - {{ makbuz.belge_no }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #eee; }
        .makbuz-container { 
            background: white; width: 210mm; min-height: 148mm; margin: 20px auto; padding: 10mm; 
            box-shadow: 0 0 10px rgba(0,0,0,0.1); 
        }
        @media print {
            body { background: white; }
            .makbuz-container { width: 100%; margin: 0; padding: 0; box-shadow: none; border: none; }
            .no-print { display: none !important; }
        }
        .header-line { border-bottom: 2px solid #000; margin-bottom: 10px; }
        .footer-box { border: 1px solid #ccc; height: 80px; margin-top: 20px; }
    </style>
</head>
<body>

<div class="text-center my-3 no-print">
    <button onclick="window.print()" class="btn btn-primary"><i class="bi bi-printer"></i> Yazdır</button>
    <button onclick="window.close()" class="btn btn-secondary">Kapat</button>
</div>

<div class="makbuz-container">
    <div class="row align-items-center mb-4 header-line pb-3">
        <div class="col-2">
            <img src="https://via.placeholder.com/80" alt="Logo" class="img-fluid">
        </div>
        <div class="col-6">
            <h4 class="fw-bold mb-0">{{ current_user.firma.unvan }}</h4>
            <div class="small">{{ current_user.firma.adres }}</div>
            <div class="small">Tel: {{ current_user.firma.telefon }}</div>
        </div>
        <div class="col-4 text-end">
            <h3 class="fw-bold text-uppercase">{{ makbuz.islem_turu }} MAKBUZU</h3>
            <h5 class="text-danger">{{ makbuz.belge_no }}</h5>
            <div>{{ makbuz.tarih.strftime('%d.%m.%Y') }}</div>
        </div>
    </div>

    <div class="row mb-4 p-3 bg-light border rounded">
        <div class="col-12">
            <strong class="me-2">Sayın:</strong>
            <span class="fs-5">{{ makbuz.cari.unvan }}</span>
        </div>
    </div>

    <table class="table table-bordered table-sm mb-4">
        <thead class="table-light">
            <tr>
                <th>Tür</th>
                <th>Açıklama / Banka / Vade</th>
                <th class="text-end">Tutar</th>
            </tr>
        </thead>
        <tbody>
            {% for kh in makbuz.kasa_hareketleri %}
            <tr>
                <td>NAKİT</td>
                <td>{{ kh.aciklama }} ({{ kh.kasa.ad }})</td>
                <td class="text-end">{{ "{:,.2f}".format(kh.tutar) }} ₺</td>
            </tr>
            {% endfor %}

            {% for cs in makbuz.cek_senetler %}
            <tr>
                <td>{{ cs.tur }}</td>
                <td>{{ cs.banka }} - No: {{ cs.cek_no }} - Vade: {{ cs.vade_tarihi.strftime('%d.%m.%Y') }}</td>
                <td class="text-end">{{ "{:,.2f}".format(cs.tutar) }} ₺</td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot class="table-light fw-bold">
            <tr>
                <td colspan="2" class="text-end">GENEL TOPLAM:</td>
                <td class="text-end fs-5">{{ "{:,.2f}".format(makbuz.genel_toplam) }} ₺</td>
            </tr>
        </tfoot>
    </table>

    <div class="row mt-5">
        <div class="col-12 mb-2">
            <strong>Yazı ile:</strong> ........................................................................................
        </div>
        <div class="col-12 mb-4 text-muted small">
            <i class="bi bi-info-circle"></i> {{ makbuz.aciklama }}
        </div>
    </div>

    <div class="row text-center mt-5">
        <div class="col-4">
            <div class="mb-5">Teslim Eden</div>
            <div class="border-top w-75 mx-auto pt-2">{{ makbuz.cari.unvan }}</div>
        </div>
        <div class="col-4"></div>
        <div class="col-4">
            <div class="mb-5">Tahsil Eden</div>
            <div class="border-top w-75 mx-auto pt-2">{{ makbuz.plasiyer.ad_soyad }}</div>
        </div>
    </div>
</div>

</body>
</html>